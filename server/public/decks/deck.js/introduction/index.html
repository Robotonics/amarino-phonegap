<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Amarino meets PhoneGap</title>
	
	<meta name="description" content="A jQuery library for modern HTML presentations">
	<meta name="author" content="Caleb Troughton">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="../core/deck.core.css">
	<link rel="stylesheet" href="../extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="../extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="../extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="../extensions/status/deck.status.css">
	<link rel="stylesheet" href="../extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="../extensions/scale/deck.scale.css">
	
	<!-- Style theme. More available in /themes/style/ or create your own. -->
	<link rel="stylesheet" href="../themes/style/web-2.0.css">
	
	<!-- Transition theme. More available in /themes/transition/ or create your own. -->
	<link rel="stylesheet" href="../themes/transition/horizontal-slide.css">
	
	<script src="../modernizr.custom.js"></script>
</head>

<body class="deck-container">

<!-- Begin slides -->

<section class="slide" id="title-slide">
	<h1 style="font-size:80px">Amarino meets PhoneGap</h1>
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
    <p style="margin-left:500px">@musart</p>
</section>

<section class="slide">
	<h2>Amarino</h2>
    <ul>
        <li>
            <h3>What is this?</h3>
            <p>bluetooth library for controlling Arduino</p>
        </li>
        <li>
            <h3>What do we need?</h3>
            <p>HW : Arduino / Android Phone</p>
            <p>SW : arduino codes / amarino library</p>
            <p>Tools : sketch tools / eclispe</p>
        </li>
        <li>
            <h3>What can we do?</h3>
            <p>Android phone can control led and receive button press event via bluetooth</p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>PhoneGap</h2>
    <ul>
        <li>
            <h3>What is this?</h3>
            <p>HTML5 Mobile Application framework</p>
        </li>
        <li>
            <h3>What do we need?</h3>
            <p>HW : Android Phone</p>
            <p>SW : PhoneGap library</p>
        </li>
        <li>
            <h3>What can we do?</h3>
            <p>Web application can load on android phone as a mobile application.</p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>amarino meets phonegap</h2>
    <ul>
        <li>
            <h3>What can we do?</h3>
            <p>Sensors can be controlled by Web Application as an native application.</p>
            <p>It is easy to make mash up service from web application.</p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>hardware and software</h2>
    <img src="../resources/hw_sw_table.png" alt="">
</section>

<section class="slide">
	<h2>today's demo</h2>
    <ul>
        <li>
            <h3>This presentation</h3>
            <p><code>deck.js</code>, Web presentation framework</p>
            <p><code>controldeck.js</code> written by node.js amd socket.io</p>
            <img src="../resources/controldeck.png" alt="">
        </li>
    </ul>
</section>

<section class="slide">
    <script>
        function blinkingLED() {
            console.log("test");
            io.connect().emit('arduino', {led: 'blink'});
        }
    </script>
	<h2>today's demo</h2>
    <ul>
        <li>
            <h3>input / output</h3>
            <p>button event > amarino > phonegap > web application > send controldeck.js > go to next slide.</p>
            <p><a href="javascript:blinkingLED()">led button</a> > send web application > phonegap > amarino > led control</p>
            <img src="../resources/today_demo_architecture.png" alt="">
        </li>
    </ul>
</section>
    
<!--
<section class="slide">
	<h2>LED test</h2>
    <script>
        function blinkingLED() {
            console.log("test");
            io.connect().emit('arduino', {led: 'blink'});
        }
    </script>
    <a href="javascript:blinkingLED()">blinking LED</a>
</section>
-->

<section class="slide">
	<h2>set up bluetooth shield</h2>
    <table>
        <tr>
            <td>
                <ul>
                    <li>
                        <h3>Use Hercules App</h3>
                        <p>Baud rate : 57600</p>
                        <p>AT+NAME<font color=blue>musart</font></p>
                        <p>AT+PIN<font color=blue>1234</font></p>
                        <p>AT+BAUD<font color=blue>7</font></p>
                    </li>
                </ul>
            </td>
            <td>
                <img src="../resources/hercules.png" alt="" style="position:absolute; margin-top:100px">
            </td>
        </tr>
    </table>
    <p>- <a href="http://cafe.naver.com/mpucafe/2596">cafe.naver.com/mpucafe/2596</a></p>
    <p>- <a href="http://www.hw-group.com/products/hercules/index_en.html">www.hw-group.com/products/hercules/index_en.html</a></p>
</section>

<section class="slide">
	<h2>program meetAndroid</h2>
    <ul>
        <li>
            <p>use Arduino Sketch</p>
        </li>
        <li>
            <p>Set your arduino and serial port</p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;Arduino Uno & <code>/dev/cu.usbmodemfa131</code></p>
        </li>
        <li>
            <p>connect LED and button to arduino</p>
        </li>
        <li>
            <p>implement source codes for controlling LED and button</p>
        </li>
        <li>
            <p><a href="https://github.com/musart/amarino-phonegap/blob/master/arduino/musart/musart.ino">github.com/musart/amarino-phonegap/blob/master/arduino/musart/musart.ino</a></p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>implement amarino</h2>
    <ul>
        <li>
            <p>create android project</p>
        </li>
        <li>
            <p>get source codes</p>
            <p><code>svn checkout http://amarino.googlecode.com/svn/trunk/ amarino-read-only</code></p>
        </li>
        <li>
            <p>put service and receiver tags in your manifest file</p>
        </li>
        <li>
            <p>add amarino library as a source code</p>
            <p>use AndroidBluetoothLibrary.jar instead of AmarinoLibrary_v0.55.jar</p>
            <p>copy ‘src’, ‘res’ and set manifest.xml</p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>implement phonegap</h2>
    <ul>
        <li>
            <p>add phonegap library - <code>cordova-2.2.0.jar</code></p>
        </li>
        <li>
            <p>make activity to inherit <code>DroidGap</code></p>
        </li>
        <li>
            <p>call <code>loadUrl()</code> to load web application</p>
        </li>
        <li>
            <p>put a web application into <code>assets</code> folder</p>
        </li>
        <li>
            <p>set res folder and add attribute in <code>manifest.xml</code></p>
        </li>
        <li>
            <p><a href="https://github.com/musart/amarino-phonegap/blob/master/android/src/com/musart/amarino_android/amarinoAndroidActivity.java">github.com/musart/amarino-phonegap/blob/master/android/src/com/musart/amarino_android/amarinoAndroidActivity.java</a></p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>implement web application</h2>
    <ul>
        <li>
            <p>add phonegap javascript library - <code>cordova-2.2.0.js</code></p>
        </li>
        <li>
            <p>implement web application</p>
        </li>
    </ul>
</section>

<section class="slide">
	<h2>control Javascript API</h2>
    <pre><code>var <font color=blue>amarino</font> = new <font color=blue>amarinoPlugin</font>({"connectionId":"00:12:03:10:22:91"}, onSuccess, onError);

<font color=blue>amarino.buttonEvent</font>(onCallback, onCallbackError);
function onCallback(data) {
  var currentTimestamp = new Date().getTime();
  
  if(<font color=blue>data === "B:released"</font>) {
    if( (currentTimestamp-amarino.timestamp) < 1000 ) {
      alert("short press");
    } else {
       alert("long press");
    }
  }
  amarino.timestamp = currentTimestamp;
}

<font color=blue>amarino.controlLED();</font></code></pre>
    <p><a href="https://github.com/musart/amarino-phonegap/blob/master/server/public/control-2btn.html">github.com/musart/amarino-phonegap/blob/master/server/public/control-2btn.html</a></p>
</section>

<section class="slide">
	<h2>implement phonegap plugin</h2>
    <ul>
        <li>
            <h3>implement amarino plugin library</h3>
            <p><code>amarinoPlugin.js</code></p>
            <p><a href="https://github.com/musart/amarino-phonegap/blob/master/server/public/amarinoPlugin.js">github.com/musart/amarino-phonegap/blob/master/server/public/amarinoPlugin.js</a></p>
        </li>
        <li>
            <h3>implement phonegap amarino plugin</h3>
            <p><code>amarinoPlugin.java</code></p>
            <p><a href="https://github.com/musart/amarino-phonegap/blob/master/android/src/com/musart/amarino_android/amarinoPlugin.java">github.com/musart/amarino-phonegap/blob/master/android/src/com/musart/amarino_android/amarinoPlugin.java</a></p>
        </li>
    </ul>
</section>
    
<section class="slide">
	<h2>modify amarino</h2>
    <ul>
        <li>
            <p>Put <font color=blue>intent</font> for phonegap <font color=blue>callback id</font> due to amarino is designed by service-boradcast receiver. That means it is a asynchronous call.</p>
        </li>
    </ul>
    <img src="../resources/sequence.png" alt="">
</section>

<section class="slide">
	<h1 style="font-size:70px">What else can we do?</h1>
</section>

<section class="slide">
	<h2>reference</h2>
    <ul>
        <li>
            <p>amarino : <a href="http://www.amarino-toolkit.net/">www.amarino-toolkit.net/</a></p>
        </li>

        <li>
            <p>phonegap : <a href="http://phonegap.com/">phonegap.com/</a></p>
        </li>

        <li>
            <p>arduino : </p>
            <p><a href="http://arduino.cc/">arduino.cc/</a></p>
            <p><a href="http://www.hw-group.com/products/hercules/index_en.html">www.hw-group.com/products/hercules/index_en.html</a></p>
            <p><a href="http://cafe.naver.com/mpucafe">cafe.naver.com/mpucafe</a></p>
        </li>

        <li>
            <p>schematics : <a href="http://breakoutjs.com/examples/schematics.pdf">breakoutjs.com/examples/schematics.pdf</a></p>
        </li>

        <li>
            <p>decks.js : <a href="http://imakewebthings.com/deck.js/">imakewebthings.com/deck.js/</a></p>
        </li>

        <li>
            <p>controldeck.js : <a href="http://dfcb.github.com/controldeck.js/">dfcb.github.com/controldeck.js/</a></p>
        </li>

        <li>
            <p>github source code : <a href="https://github.com/musart/amarino-phonegap">github.com/musart/amarino-phonegap</a></p>
        </li>
    </ul>
</section>
    




    
<section class="slide" id="title-slide">
	<h1 style="font-size:80px">Thanks</h1>
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
    <p style="margin-left:500px">@musart</p>
</section>

<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet -->
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<!-- deck.goto snippet -->
<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>

<!-- deck.hash snippet -->
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../jquery-1.7.2.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="../core/deck.core.js"></script>
<script src="../extensions/hash/deck.hash.js"></script>
<script src="../extensions/menu/deck.menu.js"></script>
<script src="../extensions/goto/deck.goto.js"></script>
<script src="../extensions/status/deck.status.js"></script>
<script src="../extensions/navigation/deck.navigation.js"></script>
<script src="../extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck -->
<script>
$(function() {
	$.deck('.slide');
});
</script>

<!-- controldeck.js -->
<script src="/socket.io/socket.io.js"></script>
<script src="/controldeck-slides.js"></script>

</body>
</html>
